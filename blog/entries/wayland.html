<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta property="og:title" content="State of Wayland as of Q1 2021.">
	<meta property="og:site_name" content="Red's Blog">
	<meta property="og:url" content="https://redsql.github.io/blog">
	<meta property="og:description" content="Will 10+ years into development of a display protocol provide a superior experience to the sinking ship of X11? Is Wayland Wayreadytoland? Well, let's see for ourselves! ">
	<meta property="og:type" content="article">
	<meta property="article:tag" content="wayland,linux,computing">
	<meta property="keywords" content="wayland,linux,computing,x11,x.org,compositors,kde,plasma">
	<link rel="stylesheet" href="../../res/style.css"/>
	<link rel="alternate" type="application/atom+xml" title="Blog of RedSQL" href="/feed.xml">
	<title>State of Wayland as of Q1 2021.</title>
</head>
<body>
	<p><b>DISCLAIMER:</b> Those are my personal observations from using Wayland in ways I usually use my computer under X11. I am <b>not</b> here to keep bagging on Wayland or / and its developers. This is just my pure experience with it, and me trying to help things improve. <b>I am not here to blame anyone</b>, this is just what I experienced and my raw thoughts about Wayland experience.</p>
	<h2>Outdated post warning!</h2>
	<p>As of 2022-04-13, this is slightly outdated! Will revise in the future!</p>
	<h1>Are ya landing son? - State of Wayland as of Q1 2021</h1>
	<img class="image" src="https://gitlab.freedesktop.org/wayland/weston/-/raw/master/data/wayland.svg" alt="Wayland Logo" />
	<p class="captionmedia">Wayland logo by Kristian HÃ¸gsberg at <a href="https://freedesktop.org/">freedesktop.org</a>.</p>
	<p>I consider myself a realistic person. That being said, I try to look on things from the perspective as-is without shifting things around in anyone's favour. I, like everyone else, acquire my conclusions and opinions based on facts that I experience myself. For example, if something works - I'll say that it works in my case. If something doesn't work - I'll point it out directly. That's how I, and many other people operate. Sadly, this world is not ideal. Not everything that works for one person may not work for the other and vice versa. Maybe John has a functioning motherboard that doesn't crap itself every hour, unlike unlucky James right next to him. That's just how things are in life.</p>
	<p>Sadly, because of that everlasting lifelong condition of things being <i>different</i>, some people find themselves frustrated at the notion that something doesn't work for them - but works perfectly fine for others or, in some cases - other way around. And that's okay. Things being perfect is rarely the case in the modern world. You can't please everyone...</p>
	<p>Where was I... Oh, right: <b>Wayland</b>.</p>
	<h2>Waywhat?</h2>
	<p>If you seriously opened this post without even <i>knowing</i> what Wayland is - then this post is not for you I'm afraid. If you don't know what things like Wayland, X11, Display Protocol, Display Server and other terms mean - I'm sorry, this is for people who are aware of the situation between Wayland and X11. Feel free to research on your own, though. I don't want to explain too much as I want to keep this concise.</p>
	<h2>A way big road to desktops</h2>
	<p>Wayland initially released on 30th of September 2008. That would make it, at the time of publishing this piece - roughly 12 years old. That's quite a long time ago, and is plenty of time to let things in Wayland mature enough to the general usability point.</p>
	<p>I initially wasn't very excited for it. Mainly because X11 did the job fine on what I have used it for, and I saw no reason to change... yet. However, after experiencing many shortcomings of X11 (Singlethreaded, Outdated, Insecure design, A bunch of hacks you needed to do to have it work well etc.) I decided that this is time for a change. For a change to something that will work on my computer and won't hang if GPU usage goes a bit too high. And there I thought - it is time for Wayland.</p>
	<p>While, that is cool and all, I would come to a very abrupt halt when working with Wayland as I would not experience Wayland until early 2021. No big deal right? Well, to be fair, other people have experienced Wayland <i title="No pun intended.">way</i> before I did and considering I wanted to test it for longer than I can remember, it's a bit of a bummer that I only got my hands on it now. On the other, positive note - I am lucky, in terms of that I can experience ever so slightly more refined experience with Wayland than I would had if I did it way beforehand. Oh well, better late than never.</p>
	<h2>Initial Experience</h2>
	<p>My first experience with Wayland could be described as bittersweet. I got really excited to see KDE Plasma load after selecting "Plasma (Wayland)" in login manager as an option, since that was the first time I ever got to try something new and upcoming! It loaded into the DE and... The... The desktop on primary monitor is... gone?</p>
	<p>No, seriously, my primary monitor was just a blank screen with nothing on it, meanwhile my second monitor was acting like a primary monitor. Weird. However, then it hit me - Primary monitor was actually <i>still working</i>, I could still interact with the DE on it. Then, I eventually conluded that the way Wayland monitor configurations are stored are a little bit different - therefore something went up behind the scenes resulting in my primary monitor being blank. That's... Not ideal, but not the end of the world either - This is fine, I can fix it... Or can I?</p>
	<p>I went over to display options in system settings in hopes to fix the primary monitor being blank and secondary monitor acting as primary. I opened display settings, and... There is... No option for a primary monitor? Well, as it would turn out - <a href="https://old.reddit.com/r/kde/comments/ae8czw/plasma_wayland_works_great_but_how_do_i_set_a/edn7bnj/">Wayland has no concept of "Primary Monitor"</a>. None, null, zero, nana. Wayland has no idea or interest which monitor is which. That has to be handled by the people who implement Wayland into their DE. As of Plasma 5.21.3, there is <b>no option to set primary monitor under Wayland</b>. This may not be <abbr title="Technically it's *related* to Wayland, but eh, I'll let it slip.">Wayland issue per se</abbr>, but dang is it a bummer.</p>
	<p>I eventually did a hacky workaround to this display issue. Or rather, I found a hacky workaround for the hacky workaround to the display issue. I read that disabling secondary monitor in settings and then enabling it back would make your primary monitor stay primary and your secondary becomes your secondary - as it should be. That however, doesn't persist through reboots but I let that slip - it's a workaround and it works at least somehow. You might think that that's it, right? Well, sadly, no. Guess what disabling my secondary monitor in system settings did? Nope, it didn't stay on. Nope, it didn't disable my primary monitor either. Neither did it shut down my system. It actually, to my absolute shock, managed to <b>crash <abbr title="Or it's compositor.">Wayland</abbr></b>. Thankfully, Wayland managed to recover from it (to sweeten things up - this is unlike X11, which, if dies - tough luck, have fun restarting your system) buuuut... The recovery was <i>meh</i> at best. Apps would not launch from tray or launch menu - only thing that worked is terminal shortcut and launching things from terminal. Not to mention that my CPU usage was now at a constantly 50%! Some apps were eating up as much as 15% (ish) each, requiring me to totally restart - because relog just made things worse.</p>
	<p>Next thing I noticed is that when some windows pop up they pop up in seemingly random spots. However, as I saw them appear, they appear in a looping grid form when they appear. This is pretty weird to say the least, but not a complete dealbreaker - who cares anyway? They are opening and that's good enough in my books.</p>
	<p>I also noticed some really glitchy artifacting with window headers throughout the entire time I was in a Wayland session. Those glitches don't interfere with apps' functionality - they work just fine. However, this is <i>really</i> annoying after a while. But wait - that is not all! Some windows would completely blank out periodically, requiring a full on restart of them. Now THAT was just getting on my nerves. This was especially prominent with Discord, which was constantly going blank and it made me restart it as much as 8 times in the span of <b>6 mintues</b>.</p>
	<p>Eesh, alright, as I put all that aside I decided to give wine a go. And yes, I am aware - Wine isn't a Wayland app. How does it work then? Well, you see, when you are going to make something people can migrate over to from the other platform - you'd want to make some sort of backwards compatibility layer. Otherwise, migrating to your new product will be as painful as possible to everyone. Introducing - <b>XWayland</b>! By nesting an X server under Wayland, you can launch applications made for X11 under Wayland. And so, I decided to give XWayland a go to see how well it does. And... Well... I'm afraid that from my experience it didn't really go well. Launching a semi-intense project under the Wine app produced as a little as <b>5 FPS</b>. Ouch. That will probably get fixed with a future GPU driver, though, so not all hope is lost!</p>
	<p>But hey, I was running Wayland for crying out loud! Isn't it something to be proud of? I decided to take a screenshot and post it onto Discord to show that I managed to run Wayland after all this time and I got stopped in the tracks probably by the least expected thing I could think of. I could not take a screenshot? That's right, I could not make a screenshot under Wayland. My screenshot tool, flameshot, used a function "QWindow::requestActivate()" which is not supported under Wayland. Thus, I could not take a screenshot. I thought I could install other screenshotting tool and call it a day but nope - same story here. Can't create a screenshot <i>anywhere</i>. On the bright side, Wayland is so secure it won't let anyone capture your screen! Even screenshot tools!... Eh.</p>
	<p>But here is something funny - a person who I was talking to was running Linux under Wayland as well. And they could take screenshots. However, they could not paste them onto Discord. I, on the other hand, could not take any screenshots but I could copy and paste images onto Discord just fine. Thought this was quite funny.</p>
	<h2>Some long-term shortcomings</h2>
	<p>Since Wayland is intended to be a <i>secure</i> display server protocol, it has to have security features in order for it to be considered secure. However, the implementation of those security features... In my opinion, is questionable at best. Mainly because some of them comprise of cutting down functionality in favour of 'security'.</p>
	<p>Fellas, Wayland developers... Cutting features for 'security' may be a fine idea under the condition that the software you are making is intended for your use-cases only and you can live without a certain feature or two in favour of your software being more secure. That is, however, only under condition that it's a piece of software that you are making for your personal reasons. This... Doesn't really work on a larger scale. Many people have different use-cases and different people look for different things. As such, some of those people, myself included, can seriously get stumped when something they want to do isn't feasible or possible on software you provide. In the end, this sucks for everyone. It sucks for you, developers - because in that way, Wayland gets bad press from people who want to use it in a certain way that is not possible due to Wayland's restrictions. And it sucks for people who like to use Wayland, but can't fully - because of those restrictions. Sure, you can argue that Wayland is different in it's nature and you have to live with it - <b>But different doesn't always mean better</b>. See where I'm getting at?</p>
	<p>What I think would be a pretty good and sane middleground approach to this pickle would probably be having Wayland ship by default as-is with every parameter at its defaults. That means Wayland comes to end users computer as it's intended to be used - with default configuration. However, users who would want to get a certain obstacle out of their way while using Wayland - they could simply modify a config file to disable a certain mechanism if they would like to, and as they see fit. Sure, that might put user at risk - but is it <i>really</i> your fault? Is it your fault that they went out of their way to disable something you've put in place for typical end users' good?</p>
	<p>Overall, I don't think ditching usable features in favour of anything is a good idea. Not without any other options presented anyway.</p>
	<h3>"Wow! This guy really hates Wayland! We're so tired of this anti-Wa-"</h3>
	<p>Woa woa woa! Put down your pitchforks! Relax! I don't hate Wayland! Quite the opposite, really - I <b>want</b> Wayland to replace X11 as a display server protocol - I'm sick of X11 myself! In fact...</p>
	<h2>Wayland Way... Landing?</h2>
	<p>Apart from what I listed, with the issues fixed Wayland will be a production-ready and total replacement for X11 once and for all! Wayland actually provided (obviously apart from the issues) a pretty superb experience out of the box. Here are benefits that I could note right off the bat with Wayland:</p>
	<ul>
		<li><p><b>Smoother Experience</b> - Out of the box, Wayland was butter smooth. Everything on my environment opened without even a hint of stutter. This was probably my first time seeing Plasma in it's fullest and true potential - a very slick and very smooth experience. Good job, Wayland!</p></li>
		<li><p><b>Lack of tearing</b> - Under X11 I've seen <i>plenty</i> of tearing happening in front of my eyes when I watch a YouTube video for example, or when I play some game. Under Wayland? Yeah, good luck weeding that out. Not a single time I noticed anything out of the ordinary with the screen tearing.</p></li>
		<li><p><b>Multithreading</b> - At no point under heavy CPU/GPU load did my desktop even stutter for a second. It just refused to. I loaded this sucker as much as I could to try and test how much it can handle. Well, from my testing, it could handle a lot and MORE without completely breaking down. In fact, it did not stutter or breakdown at any point during high loads. Now THAT is an upgrade from X11 where my session would just freeze!</p></li>
		<li><p><b>Drop-And-Go</b> - I thought setting up Wayland would be a complete chore. Alas, I was wrong. A couple of packages and you're ready to land onto Wayland! Same applies for XWayland. No additional setup - just launch an X application and the rest is handled for you.</p></li>
		<li><p><b>Everything Works</b> - Every application I tried on Wayland so far have worked perfectly and as intended. This also is applied to XWayland.</p></li>
		<li><p><b>Mouse Scrolling Setting</b> - FINALLY FOR CRYING OUT LOUD! A configurable mouse scroll on Linux! Now you are no longer stuck with X11's snails paced scrolling speed. </p></li>
		<li><p><b>Proper Keyboard Handling</b> - I no longer get any bugs with keyboard shortcuts under Wayland. Wayland also fixed a language switcher for me - Now it properly displays when I switch languages on the keyboard!</p></li>
		<li><p><b>Not A Bit of Workflow Changed</b> - Wayland can fully act as a drag-in replacement for X11 for end users. I absolutely see no difference between working on X11 or Wayland apart from obvious Wayland benefits.</p></li>
	</ul>
	<p>And many, many other under-the-hood benefits. It may not seem much, but in my opinion, the benefits <b>massively</b> outweigh my more bitter experience with Wayland.</p>
	<h2>Conclusion</h2>
	<p>Although this post might come off as really pessimistic and melancholic towards Wayland - but that's at core is incorrect, Wayland has a very good road ahead of it. Everything I listed so far are just final bumps in front of its finishing line. Wayland provides a really good experience, albeit with having some roughness arounds its edges and some things that need to be addressed. With little bit of bugfixing - I believe Wayland will become a drop-in replacement for Linux desktops as early as this year.</p>
	<p>Don't let my experience alone by the factor of the state of Wayland - many other people have tried it and they are very happy with what it offers and how well it does. What I had is basically almost flawless initial experience as contrary as it might sound. Let's actually break it down and answer these questions: </p>
	<ul>
		<li><p><b>Does it work?</b> - Yes.</p></li>
		<li><p><b>Does it do what I can do under X11?</b> - Yes.</p></li>
		<li><p><b>Does it do those jobs well?</b> - Almost.</p></li>
		<li><p><b>How close is it to working well?</b> - Very close.</p></li>
		<li><p><b>Does it benefit me if I switch?</b> - Yes.</p></li>
		<li><p><b>Is there any long-term shortcoming that prevents me from using it?</b> - Kind of, but it isn't that bad.</p></li>
	</ul>
	<p>From a sample of just a few questions - you can see that, overall, my experience wasn't that horrible, just slightly rough.</p>
	<p>To sum it all up - <b>I like Wayland</b>. I want Wayland to succeed in becoming an X11 replacement. Which to my, and many others joy - is insanely close to being true. The future is bright for Wayland, I believe it so. And on that hopeful and pretty positive note - I am signing off.</p>
	<p>All this was typed with pleasure in Wayland on my main machine :-)</p>
</body>
	<footer>
	<p>Last Revised: 2021-03-23</p>
		<div class="bottom-footer">
			<hr>
			<ul>
				<li><a href='https://github.com/RedSQL/redsql.github.io/issues/new' title="Usually reserved for website-related issues. But if it's feedback, I can take that as well.">Have an issue?</a></li>
				<li><a href='https://github.com/RedSQL/redsql.github.io/tree/master/blog/entries/wayland.html' title='(For this page)'>View Source</a></li>
				<li><a href='https://redsql.github.io/acknowledgements.html'>Acknowledgements</a></li>
				<li><a href='../'>Blog Entries</a></li>
			</ul>
			<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a>
		</div>
	</footer>
</html>
